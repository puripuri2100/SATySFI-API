<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>ブロック</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body>
    <div class="api-top">
      <div class="api-top-name">
        primitive
      </div>
      <div class="api-top-inner">
        <section>
          <h1>変換系</h1>
          <p>
            他の型から変換したり他の型へ変換する系のプリミティブです。
          </p>
          <div class="api-val">
            <span class="keyword">
            val 
          </span>line-break : bool -> bool -> context -> inline-text -> inline-boxes
            <p>
              <span class="inline-type">
                inline-boxes
              </span>型を<span class="inline-type">
                block-boxes
              </span>型に変換します。
            </p>
            <p>
              最初に与える2つの真偽値は、それぞれ「そのブロックの直前での改行を許可するか」と「直後での改行を許可するか」です。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>read-block : context -> block-text -> block-boxes
            <p>
              <span class="inline-type">
                block-text
              </span>を<span class="inline-type">
                block-boxes
              </span>型に変換します。
              この時に与える<span class="inline-type">
                context
              </span>型によって出力される<span class="inline-type">
                block-boxes
              </span>の行送りや分割位置などを変更することができます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>embed-block-breakable : context -> block-boxes -> inline-boxes
            <p>
              <span class="inline-type">
                block-boxes
              </span>型を一時的に<span class="inline-type">
                inline-boxes
              </span>型に擬態させる役割を持ちます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>add-footnote : block-boxes -> inline-boxes
            <p>
              脚注を作成します。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>embed-block-top : context -> length -> (context -> block-boxes) -> inline-boxes
            <p>
              <span class="inline-type">
                block-boxes
              </span>型を指定した横幅の<span class="inline-type">
                inline-boxes
              </span>型に変換します。この時、一番上の行が他の行と同じ高さになるように変換されます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>embed-block-bottom : context -> length -> (context -> block-boxes) -> inline-boxes
            <p>
              <span class="inline-type">
                block-boxes
              </span>型を指定した横幅の<span class="inline-type">
                inline-boxes
              </span>型に変換します。この時、一番下の行が他の行と同じ高さになるように変換されます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>page-break : page -> ((| page-number : int |) -> (| text-height : length; text-origin : point |)) -> ((| page-number : int |) -> (| header-context : block-boxes; header-origin : point; footer-content : block-boxes; footer-origin : point |)) -> block-boxes -> document
            <p>
              ページ番号を元にテキストの位置を返す関数とヘッダーとフッターの位置を返す関数と一緒に本文となる<span class="inline-type">
                block-boxes
              </span>を渡すことでPDF出力モードの時に最終的に作らなければいけない<span class="inline-type">
                document
              </span>型を得られます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>page-break-two-column : page -> length -> (unit -> block-boxes) -> ((| page-number : int |) -> (| text-height : length; text-origin : point |)) -> ((| page-number : int |) -> (| header-context : block-boxes; header-origin : point; footer-content : block-boxes; footer-origin : point |)) -> block-boxes -> document
            <p>
              <span class="code-inline"><code>page-break</code></span>の2段組用のプリミティブです。
            </p>
            
          </div>
        </section><section>
          <h1>枠組み</h1>
          <div class="api-val">
            <span class="keyword">
            val 
          </span>block-frame-breakable : context -> pads -> deco-set -> (context -> block-boxes) -> block-boxes
            <p>
              context、余白、描画指定、中身をそれぞれ入れることで
              途中でページ分割可能な枠で囲まれた部分を作ります。
            </p>
            <p>
              <span class="code-inline"><code>block-frame-breakable</code></span>に与えられるdeco-setはそれぞれ「口」形・「冂」形・「｜｜」形・「凵」形のグラフィックスを返すような関数です。
            </p>
            
          </div>
        </section><section>
          <h1>その他</h1>
          <div class="api-val">
            <span class="keyword">
            val 
          </span>(+++) : block-boxes -> block-boxes -> block-boxes
            <p>
              <span class="inline-type">
                block-boxes
              </span>同士を横に繋げます。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>block-nil : block-boxes
            <p>
              何もない<span class="inline-type">
                block-boxes
              </span>を作ります。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>clear-page : block-boxes
            <p>
              改行する<span class="inline-type">
                block-boxes
              </span>を作ります。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>block-skip : length -> block-boxes
            <p>
              指定した長さの分だけ縦の空白を作ります。
            </p>
            
          </div><div class="api-val">
            <span class="keyword">
            val 
          </span>get-natural-length : block-boxes -> length
            <p>
              <span class="inline-type">
                block-boxes
              </span>の横幅を取得します。
            </p>
            
          </div>
        </section>
      </div>
    </div>
  </body>
</html>